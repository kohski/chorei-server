{"swagger":"2.0","info":{"description":"家事の管理ツール：ChoreiのAPIエンドポイント","version":"1.0.0","title":"Chorei API","termsOfService":"http://swagger.io/terms/","contact":{"email":""},"license":{"name":"MIT","url":"https://opensource.org/licenses/MIT"}},"host":"localhost:3000","basePath":"/api/v1","tags":[{"name":"user","description":"User管理用"},{"name":"group","description":"Goup管理用"},{"name":"Member","description":"Member管理用。UserとGroupの中間テーブル"},{"name":"job","description":"Job管理用"},{"name":"stock","description":"Stoc管理用。JobとUserの中間テーブル"},{"name":"step","description":"Job管理用"},{"name":"tag","description":"Tag管理用"},{"name":"job_tag","description":"JobTag管理用。JobとTagの中間テーブル"}],"securityDefinitions":{"access-token":{"type":"apiKey","name":"access-token","in":"header","value":"WB4HXdfRAenKUxqgIMvxIw"},"uid":{"type":"apiKey","name":"uid","in":"header","value":"test@test.com"},"client":{"type":"apiKey","name":"client","in":"header","value":"xvUwrt1-gyMsPf1bcqg1tw"}},"schemes":["http"],"paths":{"/auth":{"post":{"tags":["user"],"summary":"SignUp用","description":"name, email, passwordでuserのsignupする","operationId":"auth","consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"body","name":"sign_up","description":"サインアップ用パラメータ","required":true,"schema":{"type":"object","properties":{"name":{"type":"string","example":"test user"},"email":{"type":"string","example":"test@example.com"},"password":{"type":"password","format":"password","example":"password"}}}}],"responses":{"200":{"description":"成功時のレスポンス","schema":{"type":"object","properties":{"status":{"type":"string","example":"success"},"data":{"type":"object","properties":{"id":{"type":"integer","example":1},"provider":{"type":"integer","example":"email"},"uid":{"type":"integer","example":"fource@test.com"},"allow_password_change":{"type":"integer","example":false},"name":{"type":"integer","example":"fource"},"image":{"type":"object","properties":{"url":{"type":"string","exampmle":"base64url"}}},"email":{"type":"integer","example":"fource@test.com"},"created_at":{"type":"integer","example":"2019-06-01T12:01:22.868Z"},"updated_at":{"type":"integer","example":"2019-06-01T12:01:22.929Z"}}}}}},"422":{"description":"失敗時のレスポンス","schema":{"type":"object","properties":{"status":{"type":"string","example":"error"},"data":{"type":"object","properties":{"some-properties":"some properties..."}},"errors":{"type":"object","properties":{"full_messages":{"type":"array","items":{"type":"string","example":["password can't be blank","Email has already been taken"]}}}}}}}}},"delete":{"tags":["user"],"summary":"ユーザー削除用","description":"destroy user","operationId":"auth/registrations#destroy","consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"header","name":"access-token","description":"access-token","required":true,"type":"string"},{"in":"header","name":"uid","description":"uid(email)","required":true,"type":"string"},{"in":"header","name":"client","description":"client","required":true,"type":"string"}],"responses":{"200":{"description":"成功時のレスポンス","schema":{"type":"object","properties":{"success":{"type":"boolean","example":true}}}},"404":{"description":"トークンは不正だった場合のレスポンス","schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"errors":{"type":"array","items":{"type":"string","example":"User was not found or was not logged in."}}}}}}}},"/auth/validate_token":{"get":{"tags":["user"],"summary":"token検証用","description":"tokenの検証用のpath","operationId":"/auth/validate_token","consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"header","name":"access-token","description":"access-token","required":true,"type":"string"},{"in":"header","name":"uid","description":"uid(email)","required":true,"type":"string"},{"in":"header","name":"client","description":"client","required":true,"type":"string"}],"responses":{"200":{"description":"成功時のレスポンス","schema":{"type":"object","properties":{"status":{"type":"string","example":"success"},"data":{"type":"object","properties":{"id":{"type":"integer","example":1},"provider":{"type":"integer","example":"email"},"uid":{"type":"integer","example":"fource@test.com"},"allow_password_change":{"type":"integer","example":false},"name":{"type":"integer","example":"fource"},"image":{"type":"object","properties":{"url":{"type":"string","exampmle":"base64url"}}},"email":{"type":"integer","example":"fource@test.com"},"created_at":{"type":"integer","example":"2019-06-01T12:01:22.868Z"},"updated_at":{"type":"integer","example":"2019-06-01T12:01:22.929Z"}}}}}},"401":{"description":"失敗時のレスポンス","schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"errors":{"type":"array","items":{"type":"string","example":"Invalid login credentials"}}}}}}}},"/auth/password":{"put":{"tags":["user"],"summary":"password変更用","description":"password変更用","operationId":"/auth/password","consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"body","name":"password info","description":"passowrd and password_confirmation","required":true,"schema":{"type":"object","properties":{"password":{"type":"string","example":"pasword"},"password_confirmation":{"type":"string","example":"pasword"}}}}],"responses":{"200":{"description":"成功時のレスポンス","schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"id":{"type":"integer","example":1},"provider":{"type":"integer","example":"email"},"uid":{"type":"integer","example":"fource@test.com"},"allow_password_change":{"type":"integer","example":false},"name":{"type":"integer","example":"fource"},"image":{"type":"object","properties":{"url":{"type":"string","exampmle":"base64url"}}},"email":{"type":"integer","example":"fource@test.com"},"created_at":{"type":"integer","example":"2019-06-01T12:01:22.868Z"},"updated_at":{"type":"integer","example":"2019-06-01T12:01:22.929Z"}}}}}},"401":{"description":"認証エラー時","schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"errors":{"type":"array","items":{"type":"string","example":"Unauthorized"}}}}},"422":{"description":"パスワード確認エラー時","schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"errors":{"type":"array","items":{"type":"string","example":"Password confirmation doesn't match Password"}}}}}}}},"/auth/sign_in":{"post":{"tags":["user"],"summary":"login用","description":"login用","operationId":"devise_token_auth/sessions#create","consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"header","name":"access-token","description":"access-token","required":false,"type":"string","example":""},{"in":"header","name":"uid","description":"uid(email)","required":false,"type":"string","example":""},{"in":"header","name":"client","description":"client","required":false,"type":"string","example":""},{"in":"body","name":"log in","description":"email/passwordによりlogin","required":true,"schema":{"type":"object","properties":{"email":{"type":"string","example":"test2@example.com"},"password":{"type":"string","example":"password"}}}}],"responses":{"200":{"description":"成功時のレスポンス","schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"id":{"type":"integer","example":1},"provider":{"type":"integer","example":"email"},"uid":{"type":"integer","example":"fource@test.com"},"allow_password_change":{"type":"integer","example":false},"name":{"type":"integer","example":"fource"},"image":{"type":"object","properties":{"url":{"type":"string","exampmle":"base64url"}}},"email":{"type":"integer","example":"fource@test.com"},"created_at":{"type":"integer","example":"2019-06-01T12:01:22.868Z"},"updated_at":{"type":"integer","example":"2019-06-01T12:01:22.929Z"}}}}}},"401":{"description":"認証エラー時","schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"errors":{"type":"array","items":{"type":"string","example":"Unauthorized"}}}}},"422":{"description":"パスワード確認エラー時","schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"errors":{"type":"array","items":{"type":"string","example":"Password confirmation doesn't match Password"}}}}}}}},"/auth/sign_out":{"delete":{"tags":["user"],"summary":"logout用","description":"logout用","operationId":"devise_token_auth/sessions#destroy","consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"body","name":"log out","description":"log out","required":true,"schema":{"type":"object"}}],"responses":{"200":{"description":"成功時のレスポンス","schema":{"type":"object","properties":{"success":{"type":"boolean","example":true}}}},"404":{"description":"ログアウト済なのにログアウトした場合のレスポンス","schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"errors":{"type":"array","items":{"type":"string","example":"User was not found or was not logged in."}}}}}}}},"/groups":{"post":{"tags":["groups"],"summary":"Group#Create","description":"name, imageを指定してgroupをcreateする","operationId":"groups#create","consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"body","name":"group#create","description":"group#create parameters","required":true,"schema":{"type":"object","properties":{"name":{"type":"string","example":"test user"},"image":{"type":"string","example":"test@example.com"}}}}],"responses":{"201":{"description":"成功時のレスポンス","schema":{"type":"object","properties":{"status":{"type":"integer","example":201},"message":{"type":"string","example":"Created: Group"},"data":{"type":"object","properties":{"id":{"type":"integer","example":1},"owner_id":{"type":"integer","example":2},"name":{"type":"integer","example":"test group"},"image":{"type":"string","example":"data:image/jpeg;base64,random_strings"},"created_at":{"type":"integer","example":"2019-06-01T12:01:22.868Z"},"updated_at":{"type":"integer","example":"2019-06-01T12:01:22.929Z"}}}}}},"400":{"description":"失敗時のレスポンス","schema":{"type":"object","properties":{"status":{"type":"string","example":400},"message":{"type":"string","example":"Bad Request"},"data":{"type":"array","items":{"type":"string","example":"名称を入力してください"}}}}}}},"get":{"tags":["groups"],"summary":"Group#Index","description":"カレントユーザに紐づいたgroupを一覧化する","operationId":"groups#index","consumes":["application/json"],"produces":["application/json"],"responses":{"200":{"description":"成功時のレスポンス","schema":{"type":"object","properties":{"status":{"type":"integer","example":200},"message":{"type":"string","example":"Success: Group"},"data":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer","example":1},"owner_id":{"type":"integer","example":2},"name":{"type":"integer","example":"test group"},"image":{"type":"string","example":"data:image/jpeg;base64,random_strings"},"created_at":{"type":"integer","example":"2019-06-01T12:01:22.868Z"},"updated_at":{"type":"integer","example":"2019-06-01T12:01:22.929Z"}}}}}}},"404":{"description":"カレントユーザがGroupを持っていない時のレスポンス","schema":{"type":"object","properties":{"status":{"type":"string","example":404},"message":{"type":"string","example":"Group is Not Found"}}}}}}},"/groups/{group_id}":{"put":{"tags":["groups"],"summary":"Group#Update","description":"Pathでidを指定してUpdate","operationId":"groups#update","consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"path","name":"group_id","description":"group#show group_id","required":true},{"in":"body","name":"group#update","description":"group#update parameters","required":true,"schema":{"type":"object","properties":{"name":{"type":"string","example":"test user"},"image":{"type":"string","example":"test@example.com"}}}}],"responses":{"200":{"description":"成功時のレスポンス","schema":{"type":"object","properties":{"status":{"type":"integer","example":200},"message":{"type":"string","example":"Success: Group"},"data":{"type":"object","properties":{"id":{"type":"integer","example":1},"name":{"type":"integer","example":"updated test group"},"image":{"type":"string","example":"data:image/jpeg;base64,random_strings"},"owner_id":{"type":"integer","example":2},"created_at":{"type":"integer","example":"2019-06-01T12:01:22.868Z"},"updated_at":{"type":"integer","example":"2019-06-01T12:01:22.929Z"}}}}}},"400":{"description":"失敗時のレスポンス(実在しないowner_id, 名前の長さ(1~100文字外)、画像がbase64形式でない場合)","schema":{"type":"object","properties":{"status":{"type":"string","example":400},"message":{"type":"string","example":"Bad Request"},"data":{"type":"array","example":["名称を入力してください","画像のMIMEタイプが不正です","オーナーを入力してください"]}}}},"404":{"description":"失敗時のレスポンス","schema":{"type":"object","properties":{"status":{"type":"string","example":404},"message":{"type":"string","example":"Group is Not Found"}}}}}},"get":{"tags":["groups"],"summary":"Group#Show","description":"Pathでidを指定してGroupを取得","operationId":"groups#show","consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"path","name":"group_id","description":"group#show group_id","required":true}],"responses":{"200":{"description":"成功時のレスポンス","schema":{"type":"object","properties":{"status":{"type":"integer","example":200},"message":{"type":"string","example":"Success: Group"},"data":{"type":"object","properties":{"id":{"type":"integer","example":1},"owner_id":{"type":"integer","example":2},"name":{"type":"integer","example":"test group"},"image":{"type":"string","example":"data:image/jpeg;base64,random_strings"},"created_at":{"type":"integer","example":"2019-06-01T12:01:22.868Z"},"updated_at":{"type":"integer","example":"2019-06-01T12:01:22.929Z"}}}}}},"404":{"description":"失敗時のレスポンス","schema":{"type":"object","properties":{"status":{"type":"string","example":404},"message":{"type":"string","example":"Group is Not Found"}}}}}},"delete":{"tags":["groups"],"summary":"Group#Destroy","description":"Pathでidを指定してGroupを削除","operationId":"groups#destroy","consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"path","name":"group_id","description":"group#destroy group_id","required":true}],"responses":{"200":{"description":"成功時のレスポンス","schema":{"type":"object","properties":{"status":{"type":"integer","example":200},"message":{"type":"string","example":"Success: Group"},"data":{"type":"object","properties":{"id":{"type":"integer","example":1},"owner_id":{"type":"integer","example":2},"name":{"type":"integer","example":"test group"},"image":{"type":"string","example":"data:image/jpeg;base64,random_strings"},"created_at":{"type":"integer","example":"2019-06-01T12:01:22.868Z"},"updated_at":{"type":"integer","example":"2019-06-01T12:01:22.929Z"}}}}}},"404":{"description":"失敗時のレスポンス","schema":{"type":"object","properties":{"status":{"type":"string","example":404},"message":{"type":"string","example":"Group is Not Found"}}}}}}},"/members":{"post":{"tags":["members"],"summary":"Members#create","description":"user_idとgroup_idを指定してmemberを作成","operationId":"Members#create","consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"body","name":"members#create","description":"Member#create parameters","required":true,"schema":{"type":"object","properties":{"group_id":{"type":"integr","example":1},"user_id":{"type":"integer","example":10}}}}],"responses":{"200":{"description":"すでにmemberがある場合はそのまま200を返す","schema":{"type":"object","properties":{"status":{"type":"integer","example":200},"message":{"type":"string","example":"Success: Group"},"data":{"type":"object","properties":{"id":{"type":"integer","example":1},"group_id":{"type":"integer","example":1},"user_id":{"type":"integer","example":10},"created_at":{"type":"integer","example":"2019-06-01T12:01:22.868Z"},"updated_at":{"type":"integer","example":"2019-06-01T12:01:22.929Z"}}}}}},"201":{"description":"新規成功時のレスポンス","schema":{"type":"object","properties":{"status":{"type":"integer","example":201},"message":{"type":"string","example":"Created: Group"},"data":{"type":"object","properties":{"id":{"type":"integer","example":1},"group_id":{"type":"integer","example":1},"user_id":{"type":"integer","example":10},"created_at":{"type":"integer","example":"2019-06-01T12:01:22.868Z"},"updated_at":{"type":"integer","example":"2019-06-01T12:01:22.929Z"}}}}}},"400":{"description":"失敗時のレスポンス(実在しないuser_id, group_id)","schema":{"type":"object","properties":{"status":{"type":"string","example":400},"message":{"type":"string","example":"Bad Request"},"data":{"type":"array","example":["Userを入力してください","Groupを入力してください"]}}}}}}},"/members/{member_id}":{"delete":{"tags":["members"],"summary":"members#destroy","description":"pathでidを指定してmemberを削除","operationId":"Members#destroy","consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"path","name":"member_id","description":"member#show member_id","required":true}],"responses":{"200":{"description":"成功時のレスポンス","schema":{"type":"object","properties":{"status":{"type":"integer","example":200},"message":{"type":"string","example":"Success: Member"},"data":{"type":"object","properties":{"id":{"type":"integer","example":1},"group_id":{"type":"integer","example":1},"user_id":{"type":"integer","example":10},"created_at":{"type":"integer","example":"2019-06-01T12:01:22.868Z"},"updated_at":{"type":"integer","example":"2019-06-01T12:01:22.929Z"}}}}}},"404":{"description":"失敗時のレスポンス(実在しないmember_id)","schema":{"type":"object","properties":{"status":{"type":"string","example":404},"message":{"type":"string","example":"Member is Not Found"}}}}}}}}}
